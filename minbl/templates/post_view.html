{% extends "base.html" %}

{% block HEAD %}
    <title>{{ BLOG_POST.title }} - {{ WEBSITE_CONTEXT['title'] }}</title>
    <meta property="og:title" content="{{ BLOG_POST.title }}" />
    <meta property="og:type" content="article" />
    <!--meta property="og:image" content="" /-->
    <meta property="og:url" content="{{ url_for("blog.post_view", post_id=BLOG_POST.post_id) }}" />

    <meta property="og:description" content="{{ BLOG_POST.preview }}" />
    <meta property="og:site_name" content="{{ WEBSITE_CONTEXT['title'] }}" />

    <meta property="article:published_time" content="{{ BLOG_POST.timestamp_utc.isoformat() }}" />
    <meta property="article:modified_time" content="{{ BLOG_POST.last_edit_timestamp_utc.isoformat() }}" />
    <!--meta property="article:expiration_time" content="{{ BLOG_POST.timestamp_utc.isoformat() }}" /-->
    <meta property="article:author" content="{{ BLOG_POST.author.display_name }}" />
    <meta property="article:section" content="Technology" />
    <meta property="article:tag" content="tech" />
    <link rel="stylesheet" type="text/css" href="{{ url_for('static', filename='codehilite-monokai.css') }}">
{% endblock %}

{% block HTML_CONTENTS %}
    <div class="blog_post_title"><h2>{{ BLOG_POST.title }}</h2></div>

    <div class="blog_post_contents">
        {{ markdown2.markdown(BLOG_POST.contents, extras=["fenced-code-blocks", "tables"]) | safe }}
    </div>

{% endblock %}

{% block FOOTER_CONTENTS %}
    {% if USER_PERMISSIONS >= 5 %}
        <a href='{{ url_for("blog.post_edit_form", post_id=BLOG_POST.post_id) }}'><button>edit</button></a>
        <a href='{{ url_for("blog.delete_post", post_id=BLOG_POST.post_id) }}'><button>delete</button></a><br>
    {% endif %}
    Posted by <a href='{{ url_for("blog.index", author_id=BLOG_POST.author.id) }}'>
    {{ BLOG_POST.author.display_name }}</a>
    on {{ BLOG_POST.timestamp_utc }}
    {% if (BLOG_POST.timestamp) != (BLOG_POST.last_edit_timestamp) %}
        <br>Last edited on: {{ BLOG_POST.last_edit_timestamp_utc }}
    {% endif %}
{% endblock %}
